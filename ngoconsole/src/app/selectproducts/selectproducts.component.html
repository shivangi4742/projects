<div materialize>
  <!-- <div class="fixed-action-btn">
    <a class="btn-floating btn-large red regNrmS4B1BN whiteBN capitalizeBN" (click)="close()">{{'Done' | translate}}</a>
  </div> -->
  <div class="row productsTabsBN">
    <div class="col s12 center">
      <ul materialize="tabs" class="col s12 wideWidgetBN  grey lighten-5 productsTabsBN tabs tabs-fixed-width regNrmS4B2BN tabsBN">
        <li *ngIf="products" class="tab col s6 tabBottomBN">
          <a [ngClass]="active == 0 ? 'active tabBN activeTabBN' : 'inactiveTabBN tabBN'" (click)="setActiveTab(0)">{{'Select Products' | translate}}</a>
          <div class="redLineBN" *ngIf="active == 0 && isInitial"></div>
        </li>
        <li [ngClass]="products ? 'tab col s6 tabBottomBN' : 'tab col s12 tabBottomBN'">
          <a [ngClass]="active == 1 ? 'active tabBN activeTabBN' : 'inactiveTabBN tabBN'" (click)="setActiveTab(1)">{{'Add New Products' | translate}}</a>
          <div class="redLineBN" *ngIf="active == 1 && isInitial"></div>
        </li>
        <div class="indicator red accent-1" style="z-index:1"></div>
      </ul>
    </div>    
  </div>
  <div *ngIf="products && active == 0" class="row">
    <div class="col s6 m4 center" *ngFor="let p of products">
      <productwidget [product]="p" [showDelete]="true"></productwidget> 
    </div>
  </div>
  <div *ngIf="active == 1">
    <form (ngSubmit)="addProduct()" #productForm="ngForm">
      <div class="row">
        <div class="valign-wrapper" *ngIf="imgErrMsg">
          <div class="errNrmS6BN col s12 center">{{imgErrMsg | translate}}</div>
        </div>
        <div [ngClass]="uploading ? 'file-field input-field workingBN col s10 offset-s1 m2' : 'file-field input-field col s10 offset-s1 m2'">
          <img *ngIf="!newProd.imageURL" class="prodImageBN" src="../../assets/shared/images/no-image.png" />
          <img *ngIf="newProd.imageURL" class="prodImageBN" src={{uploadsURL}}{{newProd.imageURL}} />
          <input [disabled]="uploading" accept=".jpg, .jpeg, .png" id="uploadImg" type="file" (change)="fileChange($event)">
        </div>                
        <div class="col s1 hide-on-med-and-up"></div>

        <div class="col s10 offset-s1 m4 input-field">
          <input  [(ngModel)]="newProd.name" class="validate regNrmS4BN" type="text" name="name" id="name" maxlength="30" required>
          <label for="name" [ngClass]="newProd.name ? 'active regNrmS6IBN' : 'regNrmS4IBN'">{{'Name'| translate}}*</label>
        </div>
        <div class="col s1 hide-on-med-and-up"></div>

        <div class="col s10 offset-s1 m3 input-field">
          <input [(ngModel)]="newProd.price" class="validate regNrmS4BN" type="number" step="0.01" min="0" max="9999999.99" 
              name="price" id="price" required>
          <label for="price" [ngClass]="newProd.price ? 'active regNrmS6IBN' : 'regNrmS4IBN'">{{'Price'| translate}}*</label>
        </div>
        <div class="col s1 hide-on-med-and-up"></div>

        <div class="col s10 offset-s1 m3 input-field">
          <input  [(ngModel)]="newProd.uom" class="validate regNrmS4BN" type="text" name="uom" id="uom" maxlength="10">
          <label for="uom" [ngClass]="newProd.uom ? 'active regNrmS6IBN' : 'regNrmS4IBN'">{{'UOM'| translate}}</label>
        </div>
        <div class="col s1 hide-on-med-and-up"></div>
        
        <div class="col m6 s10 offset-s1 input-field">
          <textarea id="description" name="description" maxlength="150" class="materialize-textarea regNrmS4BN highTextAreaBN"
            [(ngModel)]="newProd.description"></textarea>
          <label for="description" [ngClass]="newProd.description ? 'active regNrmS6IBN' : 'regNrmS4IBN'">
            {{'Description' | translate}}</label>
        </div>
        <div class="col s1 hide-on-med-and-up"></div>
        <div class="col s10 m4 offset-s1" align="right">
            <button class="btn waves-effect waves-light red regNrmS2BN buttonBN shiftDownBN" type="submit" 
                name="product" [disabled]="!productForm.form.valid || newProd.price <= 0">{{'Add' | translate}}</button>
        </div>
        <div class="col s1 hide-on-med-and-up"></div>
      </div>
    </form> 
    <p class="borderBN"></p>
    <div class="row" *ngIf="products">
      <div class="col m4 s6 center" *ngFor="let np of (products | objectfilter:newlyadded)">
        <productwidget [product]="np" [showDelete]="true"></productwidget> 
      </div> 
    </div>
  </div>
</div>